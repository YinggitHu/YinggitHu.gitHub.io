var inherits=require("util").inherits;var Connection=require("./Connection");var Events=require("events");module.exports=PoolConnection;inherits(PoolConnection,Connection);function PoolConnection(b,a){Connection.call(this,a);this._pool=b;if(Events.usingDomains){this.domain=b.domain}this.on("end",this._removeFromPool);this.on("error",function(c){if(c.fatal){this._removeFromPool()}})}PoolConnection.prototype.release=function release(){var a=this._pool;if(!a||a._closed){return undefined}return a.releaseConnection(this)};PoolConnection.prototype._realEnd=Connection.prototype.end;PoolConnection.prototype.end=function(){console.warn("Calling conn.end() to release a pooled connection is deprecated. In next version calling conn.end() will be restored to default conn.end() behavior. Use conn.release() instead.");this.release()};PoolConnection.prototype.destroy=function(){Connection.prototype.destroy.apply(this,arguments);this._removeFromPool(this)};PoolConnection.prototype._removeFromPool=function _removeFromPool(){if(!this._pool||this._pool._closed){return}var a=this._pool;this._pool=null;a._purgeConnection(this)};
var Sequence=require("./Sequence");var Util=require("util");var Packets=require("../packets");var Auth=require("../Auth");module.exports=ChangeUser;Util.inherits(ChangeUser,Sequence);function ChangeUser(a,b){Sequence.call(this,a,b);this._user=a.user;this._password=a.password;this._database=a.database;this._charsetNumber=a.charsetNumber;this._currentConfig=a.currentConfig}ChangeUser.prototype.start=function(c){var a=c.scrambleBuff();a=Auth.token(this._password,a);var b=new Packets.ComChangeUserPacket({user:this._user,scrambleBuff:a,database:this._database,charsetNumber:this._charsetNumber});this._currentConfig.user=this._user;this._currentConfig.password=this._password;this._currentConfig.database=this._database;this._currentConfig.charsetNumber=this._charsetNumber;this.emit("packet",b)};ChangeUser.prototype.ErrorPacket=function(b){var a=this._packetToError(b);a.fatal=true;this.end(a)};